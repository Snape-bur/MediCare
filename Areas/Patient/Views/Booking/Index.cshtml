@model IEnumerable<MediCare.Models.Doctor>
@{
    ViewData["Title"] = "Find a Doctor";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="max-w-7xl mx-auto px-6 py-10">
    <!-- 🩺 Page Header -->
    <div class="flex items-center justify-between mb-10">
        <h2 class="text-3xl font-extrabold text-blue-700 flex items-center gap-2">
            🔍 Find a Doctor
        </h2>
        <a asp-area="Patient" asp-controller="Dashboard" asp-action="Index"
           class="px-5 py-2.5 rounded-xl bg-gradient-to-r from-blue-800 via-blue-600 to-cyan-400 text-white font-semibold shadow-md hover:shadow-xl hover:scale-[1.02] transition-all duration-300">
            ⬅ Back to Dashboard
        </a>

    </div>

    <!-- 🔽 Search Filters -->
    <form method="get" asp-action="Index" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-white border border-blue-100 shadow-lg rounded-2xl p-8 mb-10">
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1">Specialty</label>
            <select name="specialtyId"
                    class="w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition">
                <option value="">-- All Specialties --</option>
                @foreach (var s in ViewBag.Specialties)
                {
                    <option value="@s.SpecialtyId">@s.Name</option>
                }
            </select>
        </div>

        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1">Clinic</label>
            <select name="clinicId"
                    class="w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition">
                <option value="">-- All Clinics --</option>
                @foreach (var c in ViewBag.Clinics)
                {
                    <option value="@c.ClinicId">@c.Name</option>
                }
            </select>
        </div>

        <div class="flex items-end">
            <button type="submit"
                    class="w-full bg-gradient-to-r from-blue-800 via-blue-600 to-cyan-400 text-white font-semibold py-2.5 rounded-lg shadow-md hover:shadow-xl hover:scale-[1.02] transition-all duration-300">
                <i class="bi bi-search"></i> Search
            </button>


        </div>
    </form>

    <!-- 🩺 Doctor List -->
    @if (!Model.Any())
    {
        <div class="text-center bg-yellow-50 border border-yellow-200 text-yellow-700 py-5 rounded-xl shadow-sm font-medium">
            No doctors found. Please adjust your filters.
        </div>
    }
    else
    {
        <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
            @foreach (var doctor in Model)
            {
                <div class="bg-white rounded-2xl border border-blue-100 shadow-md hover:shadow-xl transition-transform hover:-translate-y-1 p-6 flex flex-col justify-between">
                    <div>
                        <div class="flex items-center mb-4">
                            <div class="bg-gradient-to-br from-blue-100 to-yellow-100 p-3 rounded-full mr-4">
                                <i class="bi bi-person-circle text-3xl text-blue-700"></i>
                            </div>
                            <div>
                                <h5 class="text-lg font-semibold text-gray-900">@doctor.AppUser.FullName</h5>
                                <p class="text-sm text-blue-600">@doctor.Specialty?.Name</p>
                            </div>
                        </div>

                        <p class="text-sm text-gray-700 mb-1">
                            <span class="font-semibold">Clinic:</span> @doctor.Clinic?.Name
                        </p>
                        <p class="text-sm text-gray-700 mb-1">
                            <span class="font-semibold">Fee:</span> Rs. @doctor.ConsultationFee.ToString("N2")
                        </p>
                        <p class="text-gray-500 text-sm mt-2">
                            @doctor.ProfileInfo
                        </p>
                    </div>

                    <div class="flex justify-between mt-6">
                      
                        <a asp-action="Details" asp-route-id="@doctor.DoctorId"
                           class="px-5 py-2.5 rounded-xl bg-gradient-to-r from-blue-800 via-blue-600 to-cyan-400 text-white font-semibold shadow-md hover:shadow-xl hover:scale-[1.02] transition-all duration-300">
                            View Details
                        </a>
                       
                    </div>
                </div>
            }
        </div>
    }

    <!-- ❌ Cancel Button -->
    <div class="mt-12 text-center">
        <a asp-area="Patient" asp-controller="Dashboard" asp-action="Index"
           class="inline-block px-6 py-2.5 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-400 rounded-xl text-gray-700 font-medium transition shadow-sm">
            Cancel & Return to Dashboard
        </a>
    </div>
</div>
